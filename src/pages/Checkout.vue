<template>
  <q-page class="page ">
    <h1 class="title q-mb-lg q-mb-lg-xl text-center">Корзина <span v-if="!cart.items.length>0">пуста</span></h1>
    <div v-if="cart.items.length>0" class="container">
      <div class="cart-grid gt-sm">
        <p class="no-margin">Товар</p>
        <p class="no-margin">Цена</p>
        <p class="no-margin">Количество</p>
        <p class="no-margin">Всего</p>
      </div>
    </div>
    <q-separator v-if="cart.items.length>0" spaced="lg"/>
    <div  class="container">

      <div v-if="cart.items.length>0" class="cart">

        <div class="cart-item" v-for="item in cart.items" :key="item.id">
          <div class="cart-grid q-mb-md">
            <div class="cart-item-img" >
              <img class="img" :src="item.item.image_thumb" alt="">
              <div class="flex column items-start justify-between">
                <div class="full-width">
                  <div class="flex items-start justify-between ">
                    <p class="q-mb-none text-weight-bold  text-fs18 text-dark">{{item.item.name}}</p>
                    <q-btn class="lt-md" @click="deleteItem(item.id)" flat round dense icon="close"/>
                  </div>

                  <p class="q-mb-none text-weight-light  text-fs18 text-dark">Объем: {{item.volume.label}}</p>
                  <p class="q-mb-none text-weight-light  text-fs18 text-dark">Упаковка: {{item.box}}</p>
                  <p class="lt-md q-mb-none text-weight-light  text-fs18 text-dark">{{item.volume.price}} ₽</p>

                </div>
                <p class="gt-sm q-mb-none text-weight-light link text-caption text-grey-4 cursor-pointer" @click="deleteItem(item.id)">Удалить</p>
                <q-btn-group class=" bg-grey-2 lt-md"  unelevated>
                  <q-btn   @click="changeAmount('del',item.id)" size="12px"  icon="remove" />
                  <q-btn  dense size="16px" disable :label="item.amount" />
                  <q-btn   @click="changeAmount('add',item.id)" size="12px"  icon-right="add"  />
                </q-btn-group>
              </div>
            </div>

            <div class="gt-sm">{{item.volume.price}} ₽</div>
            <div class="gt-sm">
              <q-btn-group class=" bg-grey-2 "  unelevated>
                <q-btn   @click="changeAmount('del',item.id)" size="12px"  icon="remove" />
                <q-btn   size="16px" disable :label="item.amount" />
                <q-btn   @click="changeAmount('add',item.id)" size="12px"  icon-right="add"  />
              </q-btn-group>
            </div>
            <div class="gt-sm">{{item.price}} ₽</div>
          </div>

        </div>

      </div>
    </div>
    <q-separator v-if="cart.items.length>0" class="q-mb-lg"/>
    <div v-if="cart.items.length>0" class="container">
      <p class=" text-h5 text-bold text-dark text-right q-mb-none">  Общая стоимость:{{cart.price}} ₽</p>
      <p class=" text-body1 text-bold text-dark text-right q-mb-none">  Общий вес:{{total_weight}} кг</p>
      <p class=" text-body1 text-bold text-dark text-right q-mb-none">  Общий объем:{{total_vol}} m<sup>3</sup></p>
      <div class="row q-col-gutter-md">
        <div class="col-12 col-md-6">
          <p>Заказчик</p>
          <q-form ref="personalForm" class="auth-form" @submit.prevent="calcDelivery">
            <q-input
              outlined
              square
              bg-color="grey-2"
              :dense="!$q.screen.gt.md"
              v-model="personalInfo.email"
              label="Ваш E-Mail "
              class="q-mb-md"

            /><q-input
            outlined
            square
            bg-color="grey-2"
            :dense="!$q.screen.gt.md"
            v-model="personalInfo.phone"
            label="Ваш телефон *"
            lazy-rules
            :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
          />
            <div class="row q-col-gutter-md">
              <div class="col-12 col-md-6">
                <q-input
                  outlined
                  square
                  bg-color="grey-2"
                  :dense="!$q.screen.gt.md"
                  v-model="personalInfo.name"
                  label="Ваше Имя *"
                  lazy-rules
                  :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
                />
              </div>
              <div class="col-12 col-md-6">
                <q-input
                  outlined
                  square
                  bg-color="grey-2"
                  :dense="!$q.screen.gt.md"
                  v-model="personalInfo.email"
                  label="Ваша Фамилия *"
                  lazy-rules
                  :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
                />
              </div>
            </div>
            <div class="row q-col-gutter-md">
              <div class="col-12 col-md-6">
                <q-select
                  outlined
                  square
                  bg-color="grey-2"

                  v-model="personalInfo.city"
                  label="Город (начните вводить)*"
                  use-input
                  option-label="unrestrictedValue"
                  :display-value="personalInfo.city ? personalInfo.city.locality : ''"
                  :loading="city_loading"
                  :dense="!$q.screen.gt.md"
                  input-debounce="0"
                  :options="cities"
                  @filter="filterCities"
                  lazy-rules
                  :rules="[ val => val  || 'Это обязательное поле']"
                />
              </div>
              <div class="col-12 col-md-6">
                <q-input
                  outlined
                  square
                  bg-color="grey-2"
                  :dense="!$q.screen.gt.md"
                  v-model="personalInfo.index"
                  label="Индекс *"
                  lazy-rules
                  :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
                />
              </div>
            </div>
            <q-input
              outlined
              square
              bg-color="grey-2"
              :dense="!$q.screen.gt.md"
              v-model="personalInfo.street"
              label="Улица *"
              lazy-rules
              :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
            />
            <div class="row q-col-gutter-md">
              <div class="col-12 col-md-6">
                <q-input
                  outlined
                  square
                  bg-color="grey-2"
                  :dense="!$q.screen.gt.md"
                  v-model="personalInfo.home"
                  label="Номер дома *"
                  lazy-rules
                  :rules="[ val => val && val.length > 0 || 'Это обязательное поле']"
                />
              </div>
              <div class="col-12 col-md-6">
                <q-input
                  outlined
                  square
                  bg-color="grey-2"
                  :dense="!$q.screen.gt.md"
                  v-model="personalInfo.kv"
                  label="Номер квартиры"
                />
              </div>

            </div>
            <div class="text-right">
              <q-btn color="primary"
                     class="no-border-radius q-py-md q-px-md q-mb-lg"
                     size="16px"  label="Расчет доставки" :loading="is_loading"
                     type="submit"  unelevated no-caps text-color="white"/>
            </div>

          </q-form>

        </div>
        <div class="col-12 col-md-6">
          <p>Доставка</p>

          <p v-if="!personalInfo.city">Выберите город</p>

          <q-select
            v-if="companies_loaded"
            outlined
            square
            bg-color="grey-2"
            :options="deliveryTypeOptions"
            :dense="!$q.screen.gt.md"
            class="q-mb-md"
            v-model="delivery_type"
            label="Способ доставки*"
          />

          <q-list v-if="delivery_type">

            <q-item tag="label" v-ripple v-for="(item,index) in avaiableCompanies[delivery_type.value]" :key="index">
              <q-item-section avatar top>
                <q-radio v-model="color" val="cyan" color="cyan" />
              </q-item-section>
              <q-item-section avatar >
                <q-avatar>
                  <img style="object-fit: contain" :src="item.deliveryCompanyLogo" alt="">
                </q-avatar>
              </q-item-section>
              <q-item-section>
                <q-item-label class="text-weight-medium text-dark">{{item.deliveryCompanyName}}</q-item-label>
                <q-item-label caption>
                  Доставка от {{item.deliveryDays.min}} д - {{item.deliveryDays.max}} д<br>
                  Стоимость доставки {{item.totalPrice}} руб <br>


                </q-item-label>
              </q-item-section>
            </q-item>
          </q-list>


        </div>
      </div>
    </div>
    <div v-if="cart.items.length>0" class="q-mb-lg">
      <svg width="100%" height="105" viewBox="0 0 1920 105" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="1920" height="99" fill="#07737A"/>
        <path d="M595.784 55.096C594.675 55.096 593.672 54.8507 592.776 54.36C591.891 53.8693 591.192 53.192 590.68 52.328C590.179 51.4533 589.928 50.4773 589.928 49.4C589.928 48.3227 590.179 47.352 590.68 46.488C591.192 45.6133 591.896 44.9307 592.792 44.44C593.688 43.9493 594.691 43.704 595.8 43.704C596.632 43.704 597.4 43.8427 598.104 44.12C598.808 44.3973 599.405 44.8027 599.896 45.336L599.144 46.088C598.269 45.2027 597.165 44.76 595.832 44.76C594.947 44.76 594.141 44.9627 593.416 45.368C592.691 45.7733 592.12 46.328 591.704 47.032C591.299 47.736 591.096 48.5253 591.096 49.4C591.096 50.2747 591.299 51.064 591.704 51.768C592.12 52.472 592.691 53.0267 593.416 53.432C594.141 53.8373 594.947 54.04 595.832 54.04C597.176 54.04 598.28 53.592 599.144 52.696L599.896 53.448C599.405 53.9813 598.803 54.392 598.088 54.68C597.384 54.9573 596.616 55.096 595.784 55.096ZM609.621 46.584V55H608.485V47.592H603.205V55H602.069V46.584H609.621ZM616.322 55.08C615.512 55.08 614.781 54.8987 614.13 54.536C613.48 54.1627 612.968 53.6507 612.594 53C612.221 52.3493 612.034 51.6133 612.034 50.792C612.034 49.9707 612.221 49.2347 612.594 48.584C612.968 47.9333 613.48 47.4267 614.13 47.064C614.781 46.7013 615.512 46.52 616.322 46.52C617.133 46.52 617.864 46.7013 618.514 47.064C619.165 47.4267 619.672 47.9333 620.034 48.584C620.408 49.2347 620.594 49.9707 620.594 50.792C620.594 51.6133 620.408 52.3493 620.034 53C619.672 53.6507 619.165 54.1627 618.514 54.536C617.864 54.8987 617.133 55.08 616.322 55.08ZM616.322 54.072C616.92 54.072 617.453 53.9387 617.922 53.672C618.402 53.3947 618.776 53.0053 619.042 52.504C619.309 52.0027 619.442 51.432 619.442 50.792C619.442 50.152 619.309 49.5813 619.042 49.08C618.776 48.5787 618.402 48.1947 617.922 47.928C617.453 47.6507 616.92 47.512 616.322 47.512C615.725 47.512 615.186 47.6507 614.706 47.928C614.237 48.1947 613.864 48.5787 613.586 49.08C613.32 49.5813 613.186 50.152 613.186 50.792C613.186 51.432 613.32 52.0027 613.586 52.504C613.864 53.0053 614.237 53.3947 614.706 53.672C615.186 53.9387 615.725 54.072 616.322 54.072ZM626.542 55.08C625.71 55.08 624.964 54.8987 624.302 54.536C623.652 54.1733 623.14 53.6667 622.766 53.016C622.393 52.3547 622.206 51.6133 622.206 50.792C622.206 49.9707 622.393 49.2347 622.766 48.584C623.14 47.9333 623.652 47.4267 624.302 47.064C624.964 46.7013 625.71 46.52 626.542 46.52C627.268 46.52 627.913 46.664 628.478 46.952C629.054 47.2293 629.508 47.64 629.838 48.184L628.99 48.76C628.713 48.344 628.361 48.0347 627.934 47.832C627.508 47.6187 627.044 47.512 626.542 47.512C625.934 47.512 625.385 47.6507 624.894 47.928C624.414 48.1947 624.036 48.5787 623.758 49.08C623.492 49.5813 623.358 50.152 623.358 50.792C623.358 51.4427 623.492 52.0187 623.758 52.52C624.036 53.0107 624.414 53.3947 624.894 53.672C625.385 53.9387 625.934 54.072 626.542 54.072C627.044 54.072 627.508 53.9707 627.934 53.768C628.361 53.5653 628.713 53.256 628.99 52.84L629.838 53.416C629.508 53.96 629.054 54.376 628.478 54.664C627.902 54.9413 627.257 55.08 626.542 55.08ZM635.369 55.08C634.559 55.08 633.828 54.8987 633.177 54.536C632.527 54.1627 632.015 53.6507 631.641 53C631.268 52.3493 631.081 51.6133 631.081 50.792C631.081 49.9707 631.268 49.2347 631.641 48.584C632.015 47.9333 632.527 47.4267 633.177 47.064C633.828 46.7013 634.559 46.52 635.369 46.52C636.18 46.52 636.911 46.7013 637.561 47.064C638.212 47.4267 638.719 47.9333 639.081 48.584C639.455 49.2347 639.641 49.9707 639.641 50.792C639.641 51.6133 639.455 52.3493 639.081 53C638.719 53.6507 638.212 54.1627 637.561 54.536C636.911 54.8987 636.18 55.08 635.369 55.08ZM635.369 54.072C635.967 54.072 636.5 53.9387 636.969 53.672C637.449 53.3947 637.823 53.0053 638.089 52.504C638.356 52.0027 638.489 51.432 638.489 50.792C638.489 50.152 638.356 49.5813 638.089 49.08C637.823 48.5787 637.449 48.1947 636.969 47.928C636.5 47.6507 635.967 47.512 635.369 47.512C634.772 47.512 634.233 47.6507 633.753 47.928C633.284 48.1947 632.911 48.5787 632.633 49.08C632.367 49.5813 632.233 50.152 632.233 50.792C632.233 51.432 632.367 52.0027 632.633 52.504C632.911 53.0053 633.284 53.3947 633.753 53.672C634.233 53.9387 634.772 54.072 635.369 54.072ZM646.149 46.792C646.928 46.792 647.621 46.968 648.229 47.32C648.848 47.6613 649.328 48.1467 649.669 48.776C650.01 49.3947 650.181 50.104 650.181 50.904C650.181 51.7253 650 52.456 649.637 53.096C649.285 53.7253 648.789 54.216 648.149 54.568C647.509 54.92 646.773 55.096 645.941 55.096C644.544 55.096 643.461 54.6053 642.693 53.624C641.925 52.6427 641.541 51.288 641.541 49.56C641.541 47.7573 641.882 46.376 642.565 45.416C643.258 44.456 644.336 43.8053 645.797 43.464L649.573 42.6L649.765 43.64L646.213 44.456C645.008 44.7227 644.122 45.1973 643.557 45.88C642.992 46.552 642.682 47.5493 642.629 48.872C642.97 48.2213 643.445 47.7147 644.053 47.352C644.661 46.9787 645.36 46.792 646.149 46.792ZM645.973 54.152C646.56 54.152 647.082 54.0187 647.541 53.752C648.01 53.4747 648.373 53.0907 648.629 52.6C648.896 52.1093 649.029 51.5547 649.029 50.936C649.029 50.3173 648.901 49.7733 648.645 49.304C648.389 48.8347 648.026 48.472 647.557 48.216C647.098 47.9493 646.57 47.816 645.973 47.816C645.376 47.816 644.842 47.9493 644.373 48.216C643.914 48.472 643.552 48.8347 643.285 49.304C643.029 49.7733 642.901 50.3173 642.901 50.936C642.901 51.5547 643.029 52.1093 643.285 52.6C643.552 53.0907 643.92 53.4747 644.389 53.752C644.858 54.0187 645.386 54.152 645.973 54.152ZM656.152 49.56C657.208 49.5707 658.013 49.8053 658.568 50.264C659.123 50.7227 659.4 51.384 659.4 52.248C659.4 53.144 659.101 53.832 658.504 54.312C657.907 54.792 657.053 55.0267 655.944 55.016L652.616 55V46.584H653.752V49.528L656.152 49.56ZM660.808 46.584H661.944V55H660.808V46.584ZM655.88 54.152C656.659 54.1627 657.245 54.008 657.64 53.688C658.045 53.3573 658.248 52.8773 658.248 52.248C658.248 51.6293 658.051 51.1707 657.656 50.872C657.261 50.5733 656.669 50.4187 655.88 50.408L653.752 50.376V54.12L655.88 54.152ZM672.838 55.08C672.027 55.08 671.297 54.8987 670.646 54.536C669.995 54.1627 669.483 53.6507 669.11 53C668.737 52.3493 668.55 51.6133 668.55 50.792C668.55 49.9707 668.737 49.2347 669.11 48.584C669.483 47.9333 669.995 47.4267 670.646 47.064C671.297 46.7013 672.027 46.52 672.838 46.52C673.649 46.52 674.379 46.7013 675.03 47.064C675.681 47.4267 676.187 47.9333 676.55 48.584C676.923 49.2347 677.11 49.9707 677.11 50.792C677.11 51.6133 676.923 52.3493 676.55 53C676.187 53.6507 675.681 54.1627 675.03 54.536C674.379 54.8987 673.649 55.08 672.838 55.08ZM672.838 54.072C673.435 54.072 673.969 53.9387 674.438 53.672C674.918 53.3947 675.291 53.0053 675.558 52.504C675.825 52.0027 675.958 51.432 675.958 50.792C675.958 50.152 675.825 49.5813 675.558 49.08C675.291 48.5787 674.918 48.1947 674.438 47.928C673.969 47.6507 673.435 47.512 672.838 47.512C672.241 47.512 671.702 47.6507 671.222 47.928C670.753 48.1947 670.379 48.5787 670.102 49.08C669.835 49.5813 669.702 50.152 669.702 50.792C669.702 51.432 669.835 52.0027 670.102 52.504C670.379 53.0053 670.753 53.3947 671.222 53.672C671.702 53.9387 672.241 54.072 672.838 54.072ZM687.09 46.584V55H685.954V47.592H680.674V55H679.538V46.584H687.09ZM697.199 46.584V55H696.063V47.592H692.031L691.919 49.672C691.834 51.4213 691.631 52.7653 691.311 53.704C690.991 54.6427 690.42 55.112 689.599 55.112C689.375 55.112 689.103 55.0693 688.783 54.984L688.863 54.008C689.055 54.0507 689.188 54.072 689.263 54.072C689.7 54.072 690.031 53.8693 690.255 53.464C690.479 53.0587 690.628 52.5573 690.703 51.96C690.778 51.3627 690.842 50.5733 690.895 49.592L691.039 46.584H697.199ZM703.325 46.52C704.423 46.52 705.266 46.7973 705.853 47.352C706.439 47.896 706.733 48.7067 706.733 49.784V55H705.645V53.688C705.389 54.1253 705.01 54.4667 704.509 54.712C704.018 54.9573 703.431 55.08 702.749 55.08C701.81 55.08 701.063 54.856 700.509 54.408C699.954 53.96 699.677 53.368 699.677 52.632C699.677 51.9173 699.933 51.3413 700.445 50.904C700.967 50.4667 701.794 50.248 702.924 50.248H705.597V49.736C705.597 49.0107 705.394 48.4613 704.989 48.088C704.583 47.704 703.991 47.512 703.213 47.512C702.679 47.512 702.167 47.6027 701.677 47.784C701.186 47.9547 700.765 48.1947 700.413 48.504L699.901 47.656C700.327 47.2933 700.839 47.016 701.437 46.824C702.034 46.6213 702.663 46.52 703.325 46.52ZM702.924 54.184C703.565 54.184 704.114 54.04 704.573 53.752C705.031 53.4533 705.373 53.0267 705.597 52.472V51.096H702.957C701.517 51.096 700.797 51.5973 700.797 52.6C700.797 53.0907 700.983 53.48 701.357 53.768C701.73 54.0453 702.253 54.184 702.924 54.184ZM715.677 47.592H712.493V55H711.357V47.592H708.173V46.584H715.677V47.592ZM720.855 49.56C721.911 49.5707 722.716 49.8053 723.271 50.264C723.826 50.7227 724.103 51.384 724.103 52.248C724.103 53.144 723.804 53.832 723.207 54.312C722.61 54.792 721.756 55.0267 720.647 55.016L717.319 55V46.584H718.455V49.528L720.855 49.56ZM725.511 46.584H726.647V55H725.511V46.584ZM720.583 54.152C721.362 54.1627 721.948 54.008 722.343 53.688C722.748 53.3573 722.951 52.8773 722.951 52.248C722.951 51.6293 722.754 51.1707 722.359 50.872C721.964 50.5733 721.372 50.4187 720.583 50.408L718.455 50.376V54.12L720.583 54.152Z" fill="white"/>
        <path d="M787.02 41.5598L784.479 56.4718H788.543L791.086 41.5598H787.02Z" fill="white"/>
        <path d="M781.072 41.5764L777.091 51.7459L776.667 50.2104C775.882 48.3603 773.653 45.7031 771.037 44.0286L774.677 56.4643L778.977 56.457L785.377 41.5732L781.072 41.5764Z" fill="white"/>
        <path d="M775.124 42.6436C774.888 41.7353 774.203 41.4645 773.353 41.4321H767.052L767 41.729C771.903 42.9185 775.148 45.7847 776.494 49.231L775.124 42.6436Z" fill="white"/>
        <path d="M799.323 44.4184C800.652 44.3975 801.616 44.6881 802.365 44.9891L802.731 45.1616L803.281 41.9296C802.476 41.6275 801.215 41.3035 799.641 41.3035C795.625 41.3035 792.794 43.3261 792.772 46.2247C792.746 48.3664 794.788 49.5622 796.331 50.2762C797.915 51.0079 798.446 51.473 798.438 52.1263C798.426 53.1246 797.176 53.5824 796.008 53.5824C794.381 53.5824 793.516 53.3577 792.181 52.8016L791.658 52.5632L791.086 55.9008C792.037 56.3179 793.792 56.6764 795.614 56.6952C799.886 56.6952 802.662 54.6967 802.692 51.5995C802.709 49.9051 801.626 48.6121 799.277 47.5511C797.855 46.8591 796.986 46.3992 796.994 45.701C796.994 45.0811 797.732 44.4184 799.323 44.4184Z" fill="white"/>
        <path d="M813.712 41.5764H810.572C809.597 41.5764 808.871 41.8419 808.443 42.814L802.408 56.48H806.676C806.676 56.48 807.372 54.6424 807.53 54.24C807.997 54.24 812.144 54.2463 812.735 54.2463C812.856 54.7668 813.23 56.48 813.23 56.48H817L813.712 41.5764ZM808.7 51.1878C809.034 50.3317 810.319 47.0202 810.319 47.0202C810.297 47.061 810.65 46.1579 810.86 45.5966L811.134 46.8823C811.134 46.8823 811.913 50.4425 812.076 51.1878H808.7Z" fill="white"/>
        <path d="M892.932 34.4294C889.302 34.4304 885.992 35.8066 883.498 38.0669C881.002 35.8095 877.694 34.4324 874.068 34.4324C874.037 34.4324 874.006 34.4324 873.977 34.4324C866.254 34.4828 860 40.7659 860 48.4999C860 56.265 866.303 62.5666 874.067 62.5666C877.693 62.5666 881.001 61.1913 883.496 58.932C882.975 58.4613 882.503 57.9401 882.058 57.3947H884.963C884.525 57.9314 884.047 58.4341 883.534 58.9019H883.532C883.52 58.9145 883.508 58.9223 883.496 58.933C885.993 61.1942 889.305 62.5724 892.937 62.5714C900.706 62.5685 907.002 56.2679 907 48.4999C907 48.497 907 48.4951 907 48.4931C907.001 40.7252 900.701 34.4275 892.932 34.4294ZM882.219 39.5198H884.893C885.287 39.9973 885.653 40.5 885.985 41.026H881.214C881.522 40.5233 881.86 40.006 882.219 39.5198ZM880.384 42.5031H886.796C887.024 42.9903 887.226 43.494 887.402 44.0103H879.624C879.701 43.8648 879.973 43.2786 880.384 42.5031ZM865.743 52.0831L866.596 46.7045L864.671 52.0831H863.639L863.505 46.7045L862.594 52.0831H861.149L862.347 44.9498H864.532L864.609 49.3268L866.085 44.9498H868.456L867.275 52.0831H865.743ZM870.852 52.0714L870.902 51.5017C870.878 51.5046 870.422 52.1898 869.365 52.1898C868.812 52.1898 867.919 51.888 867.919 50.5759C867.919 48.9076 869.28 48.3544 870.576 48.3544C870.779 48.3544 871.219 48.3912 871.219 48.3912C871.219 48.3912 871.269 48.2893 871.269 48.0137C871.269 47.5605 870.861 47.4984 870.303 47.4984C869.32 47.4984 868.671 47.7614 868.671 47.7614L868.888 46.4706C868.888 46.4706 869.676 46.1406 870.702 46.1406C871.233 46.1406 872.759 46.1969 872.759 47.9467L872.171 52.0714H870.852ZM876.426 50.2546C876.426 52.2451 874.498 52.1597 874.161 52.1597C872.904 52.1597 872.516 51.986 872.48 51.9763L872.68 50.6661C872.682 50.6545 873.311 50.8942 874.01 50.8942C874.414 50.8942 874.938 50.8544 874.938 50.3721C874.938 49.65 873.063 49.8227 873.063 48.1079C873.063 46.5948 874.187 46.1523 875.295 46.1523C876.151 46.1523 876.677 46.2697 876.677 46.2697L876.488 47.5915C876.488 47.5915 875.676 47.5246 875.465 47.5246C874.932 47.5246 874.642 47.641 874.642 48.0137C874.641 48.7629 876.426 48.3961 876.426 50.2546ZM878.742 50.7768C878.875 50.7768 879.025 50.7311 879.128 50.7311L878.941 52.0035C878.79 52.0452 878.364 52.1966 877.818 52.2005C877.12 52.2063 876.624 51.8162 876.624 50.9311C876.624 50.3371 877.475 45.4428 877.508 45.4108H879.006L878.853 46.2862H879.6L879.409 47.6964H878.616L878.195 50.2944C878.163 50.5011 878.22 50.7768 878.742 50.7768ZM882.035 46.1212C883.68 46.1212 884.172 47.3246 884.172 48.3117C884.172 48.7067 883.974 49.6772 883.974 49.6772H880.93C880.93 49.6772 880.649 50.8758 882.257 50.8758C883.011 50.8758 883.847 50.507 883.847 50.507L883.583 51.9501C883.583 51.9501 883.1 52.1966 882.002 52.1966C880.811 52.1966 879.414 51.6929 879.414 49.5772C879.415 47.7439 880.529 46.1212 882.035 46.1212ZM886.002 55.9457H881.012C880.708 55.4605 880.424 54.9626 880.181 54.4395H886.822C886.577 54.9597 886.304 55.4624 886.002 55.9457ZM885.667 52.0937H884.13L885.064 46.2881H886.459L886.325 47.1296C886.325 47.1296 886.822 46.2144 887.493 46.2144C887.688 46.2144 887.782 46.2338 887.782 46.2338C887.583 46.6395 887.407 47.0112 887.225 47.971C886.184 47.6022 886.105 49.6141 885.667 52.0937ZM891.524 52.0035C891.524 52.0035 890.719 52.2092 890.214 52.2092C888.426 52.2092 887.519 50.9757 887.519 49.1075C887.519 46.2901 889.201 44.7897 890.929 44.7897C891.711 44.7897 892.616 45.1565 892.616 45.1565L892.371 46.7433C892.371 46.7433 891.759 46.3153 890.997 46.3153C889.978 46.3153 889.064 47.2878 889.064 49.0551C889.064 49.9256 889.49 50.737 890.554 50.737C891.059 50.737 891.792 50.3691 891.792 50.3691L891.524 52.0035ZM895.13 52.0743L895.18 51.5008C895.156 51.5037 894.7 52.1889 893.644 52.1889C893.091 52.1889 892.198 51.887 892.198 50.5749C892.198 48.9066 893.558 48.3534 894.853 48.3534C895.057 48.3534 895.497 48.3903 895.497 48.3903C895.497 48.3903 895.548 48.2893 895.548 48.0137C895.548 47.5605 895.14 47.4984 894.581 47.4984C893.598 47.4984 892.95 47.7614 892.95 47.7614L893.167 46.4706C893.167 46.4706 893.955 46.1406 894.982 46.1406C895.512 46.1406 897.04 46.1969 897.039 47.9467L896.451 52.0714C896.45 52.0743 895.13 52.0743 895.13 52.0743ZM898.242 52.0937H896.705L897.639 46.2881H899.035L898.901 47.1296C898.901 47.1296 899.399 46.2144 900.07 46.2144C900.265 46.2144 900.358 46.2338 900.358 46.2338C900.16 46.6395 899.982 47.0112 899.801 47.971C898.759 47.6022 898.68 49.6141 898.242 52.0937ZM902.832 52.0782L902.897 51.5435C902.897 51.5435 902.4 52.1704 901.501 52.1704C900.256 52.1704 899.645 50.968 899.645 49.7393C899.645 47.839 900.789 46.1824 902.161 46.1824C903.044 46.1843 903.608 46.9636 903.608 46.9636L903.932 44.9595L905.434 44.9566L904.288 52.0782H902.832ZM905.794 51.8773C905.754 51.9491 905.698 52.0045 905.626 52.0472C905.555 52.087 905.479 52.1073 905.4 52.1073C905.322 52.1073 905.247 52.087 905.175 52.0472C905.104 52.0045 905.047 51.9491 905.008 51.8773C904.967 51.8045 904.947 51.7308 904.947 51.6522C904.947 51.5726 904.968 51.4969 905.008 51.4251C905.047 51.3532 905.107 51.295 905.177 51.2562C905.251 51.2164 905.324 51.196 905.4 51.196C905.477 51.196 905.551 51.2164 905.623 51.2562C905.697 51.296 905.753 51.3513 905.794 51.4251C905.835 51.4979 905.854 51.5736 905.854 51.6522C905.854 51.7308 905.834 51.8055 905.794 51.8773Z" fill="white"/>
        <path d="M905.674 56.17C905.664 56.1632 905.655 56.1525 905.64 56.1467C905.624 56.1408 905.6 56.1379 905.562 56.1379H905.471V56.2835H905.568C905.613 56.2835 905.643 56.2796 905.661 56.2631C905.677 56.2496 905.685 56.2331 905.685 56.2098C905.685 56.1942 905.681 56.1836 905.674 56.17Z" fill="white"/>
        <path d="M905.987 56.0826C905.945 56.0069 905.888 55.9535 905.815 55.9137C905.742 55.8739 905.669 55.8535 905.593 55.8535C905.515 55.8535 905.441 55.8739 905.37 55.9137C905.298 55.9535 905.239 56.0088 905.199 56.0826C905.157 56.1544 905.139 56.2301 905.139 56.3077C905.139 56.3854 905.159 56.462 905.199 56.5329C905.241 56.6047 905.297 56.6629 905.368 56.7027C905.44 56.7425 905.515 56.7629 905.595 56.7629C905.672 56.7629 905.748 56.7425 905.819 56.7027C905.89 56.6629 905.947 56.6047 905.987 56.5329C906.028 56.462 906.047 56.3863 906.047 56.3077C906.047 56.2291 906.027 56.1534 905.987 56.0826ZM905.707 56.56L905.665 56.4834C905.631 56.4232 905.603 56.3834 905.581 56.3679C905.568 56.3582 905.546 56.3504 905.519 56.3504H905.474V56.5591H905.394V56.069H905.563C905.621 56.069 905.663 56.0738 905.686 56.0835C905.712 56.0932 905.735 56.1068 905.748 56.1311C905.764 56.1534 905.77 56.1777 905.77 56.2029C905.77 56.2388 905.757 56.2689 905.733 56.297C905.707 56.3223 905.672 56.3388 905.631 56.3417C905.648 56.3475 905.662 56.3572 905.672 56.3679C905.693 56.3873 905.716 56.4193 905.745 56.464L905.805 56.56H905.707Z" fill="white"/>
        <path d="M870.697 49.4675C869.599 49.4675 869.377 49.9605 869.377 50.3711C869.377 50.5826 869.498 50.9359 869.963 50.9359C870.865 50.9359 871.052 49.7538 871.023 49.5025C870.98 49.4937 870.953 49.4685 870.697 49.4675Z" fill="white"/>
        <path d="M882.042 47.4614C881.226 47.4614 881.068 48.3902 881.068 48.4882H882.731C882.731 48.4135 882.887 47.4614 882.042 47.4614Z" fill="white"/>
        <path d="M902.419 47.6235C901.76 47.6235 901.239 48.3883 901.24 49.55C901.24 50.2585 901.493 50.7127 902.032 50.7127C902.844 50.7127 903.235 49.6538 903.235 48.8648C903.235 47.9943 902.958 47.6235 902.419 47.6235Z" fill="white"/>
        <path d="M905.725 51.4639C905.691 51.4037 905.644 51.3571 905.583 51.3232C905.523 51.2892 905.462 51.2727 905.398 51.2727C905.336 51.2727 905.273 51.2902 905.213 51.3232C905.152 51.3542 905.105 51.4028 905.071 51.4639C905.037 51.525 905.02 51.5901 905.02 51.6531C905.02 51.7182 905.037 51.7822 905.069 51.8414C905.105 51.9016 905.151 51.9472 905.211 51.9831C905.271 52.0161 905.333 52.0355 905.398 52.0355C905.463 52.0355 905.527 52.0161 905.585 51.9831C905.646 51.9492 905.692 51.9026 905.727 51.8414C905.761 51.7813 905.777 51.7182 905.777 51.6531C905.777 51.5891 905.759 51.525 905.725 51.4639ZM905.514 51.9026L905.471 51.8269C905.437 51.7657 905.41 51.7269 905.389 51.7123C905.373 51.6997 905.353 51.6939 905.325 51.6939H905.281V51.9016H905.199V51.4125H905.369C905.426 51.4125 905.469 51.4173 905.493 51.428C905.517 51.4367 905.539 51.4532 905.555 51.4746C905.572 51.4959 905.578 51.5202 905.578 51.5464C905.578 51.5823 905.564 51.6124 905.539 51.6396C905.514 51.6677 905.479 51.6793 905.438 51.6842C905.457 51.692 905.47 51.7007 905.48 51.7094C905.5 51.7298 905.523 51.7589 905.551 51.8055L905.612 51.9026H905.514Z" fill="white"/>
        <path d="M894.976 49.4675C893.878 49.4675 893.656 49.9605 893.656 50.3711C893.656 50.5826 893.777 50.9359 894.242 50.9359C895.144 50.9359 895.33 49.7538 895.302 49.5025C895.259 49.4937 895.231 49.4685 894.976 49.4675Z" fill="white"/>
        <path d="M905.482 51.5125C905.474 51.5028 905.464 51.495 905.449 51.4882C905.433 51.4834 905.408 51.4785 905.37 51.4785V51.4795H905.281V51.627H905.377C905.423 51.627 905.453 51.6212 905.471 51.6066C905.486 51.5921 905.495 51.5736 905.495 51.5523C905.495 51.5358 905.491 51.5261 905.482 51.5125Z" fill="white"/>
        <g clip-path="url(#clip0_512_745)">
          <path d="M1023.97 50.1683C1023.87 49.5876 1023.38 49.2392 1022.67 49.2315C1022.46 49.2284 1022.24 49.25 1022.03 49.2268C1021.61 49.1835 1021.5 49.3228 1021.5 49.6542C1021.52 51.2802 1021.52 52.9046 1021.51 54.5259C1021.51 55.376 1020.68 56.2494 1019.68 56.4708C1016.58 57.1506 1013.49 57.8413 1010.39 58.5149C1010.04 58.5907 1009.67 58.6295 1009.32 58.6264C1009.16 58.6264 1008.95 58.5087 1008.88 58.3941C1008.84 58.3182 1008.98 58.1339 1009.08 58.0395C1009.22 57.9249 1009.4 57.8335 1009.59 57.77C1010.16 57.5672 1010.73 57.3829 1011.31 57.1924C1013.61 56.4275 1015.91 55.6718 1018.21 54.9022C1019.24 54.5522 1019.8 53.8615 1019.82 52.9897C1019.87 50.1652 1019.85 47.3407 1019.83 44.5131C1019.83 44.0656 1019.6 43.6924 1019.07 43.4988C1018.46 43.2789 1017.92 43.4539 1017.38 43.7079C1014.13 45.261 1010.88 46.8111 1007.62 48.3612C1006.66 48.818 1006.12 49.4792 1006.13 50.4207C1006.14 53.0919 1006.13 55.7585 1006.14 58.4266C1006.14 58.5598 1006.15 58.696 1006.19 58.823C1006.51 59.7305 1007.34 60.2508 1008.49 60.2508C1010.78 60.257 1013.08 60.2539 1015.37 60.2539C1017.66 60.2539 1019.93 60.257 1022.22 60.2508C1022.71 60.2508 1023.17 60.1486 1023.54 59.8419C1024.02 59.4548 1024 58.9624 1024 58.4715C1024 55.87 1024 53.2716 1024 50.6654C1024 50.5028 1024 50.3325 1023.97 50.1683ZM1014.45 49.3337C1014.68 48.7344 1015.18 48.3596 1015.95 48.2636C1016.46 48.1986 1016.9 48.5129 1016.97 48.9713C1017.08 49.6774 1016.2 50.4982 1015.33 50.4951C1014.6 50.4951 1014.2 49.9856 1014.45 49.3337Z" fill="white"/>
          <path d="M959.787 39.0082C959.787 39.832 959.787 40.6388 959.787 41.4534C959.163 41.4534 958.583 41.4534 957.957 41.4534C957.957 40.6218 957.957 39.815 957.957 39.0005C957.618 39.0005 957.324 39.0005 957 39.0005C957 41.0399 957 43.0437 957 45.0521C957.334 45.0521 957.636 45.0521 957.986 45.0521C957.986 44.1354 957.986 43.2434 957.986 42.3422C958.606 42.3422 959.179 42.3422 959.794 42.3422C959.794 43.2558 959.794 44.1493 959.794 45.0552C960.142 45.0552 960.444 45.0552 960.768 45.0552C960.768 43.0298 960.768 41.0229 960.768 39.0082C960.436 39.0082 960.134 39.0082 959.787 39.0082Z" fill="white"/>
          <path d="M984.131 55.6656C983.843 54.227 982.75 53.3537 981.005 53.2096C980.317 53.157 979.617 53.2004 978.876 53.2004C978.876 51.9321 978.876 50.6499 978.876 49.3708C978.349 49.3708 977.872 49.3708 977.383 49.3708C977.383 52.8953 977.383 56.395 977.383 60.0185C978.487 60.0185 979.554 60.082 980.607 60.0015C982.185 59.8838 983.388 59.2566 983.952 57.9698C984.28 57.2234 984.286 56.4461 984.131 55.6656ZM981.822 57.2792C981.545 58.456 980.34 59.0104 978.888 58.6666C978.888 57.3597 978.882 56.0744 978.9 54.786C978.9 54.7009 979.049 54.5615 979.156 54.5414C980.608 54.2332 981.579 54.7164 981.832 55.9289C981.922 56.364 981.925 56.8425 981.822 57.2792Z" fill="white"/>
          <path d="M954.667 35.7454C954.139 35.7454 953.614 35.7469 953.087 35.7454C952.344 35.7423 951.728 35.9746 951.221 36.4221C949.482 37.9613 949.939 40.8849 952.253 41.509C951.475 42.6766 950.702 43.8411 949.893 45.0613C950.222 45.0613 950.476 45.0443 950.724 45.066C951.052 45.0954 951.221 44.9885 951.373 44.7454C951.952 43.8055 952.567 42.8794 953.168 41.9472C953.445 41.5198 953.479 41.5075 954.132 41.6329C954.132 42.7602 954.132 43.8968 954.132 45.0319C954.527 45.0319 954.87 45.0319 955.241 45.0319C955.241 44.8368 955.241 44.6726 955.241 44.5054C955.241 41.7397 955.241 38.9725 955.241 36.2053C955.241 35.7454 955.24 35.7469 954.667 35.7454ZM954.101 40.6573C953.347 40.6496 952.561 40.8369 951.986 40.2717C951.328 39.626 951.141 38.8796 951.384 38.0604C951.404 37.9954 951.436 37.9335 951.463 37.8715C951.952 36.7457 952.598 36.4329 954.101 36.6203C954.101 37.966 954.101 39.2931 954.101 40.6573Z" fill="white"/>
          <path d="M982.073 44.1832C980.43 44.7314 979.296 44.2359 978.999 42.805C978.843 42.0633 978.898 41.3169 979.169 40.5937C979.535 39.6058 980.261 39.3116 981.469 39.6383C981.492 39.6445 981.52 39.6336 981.562 39.6275C981.683 39.4772 981.807 39.3193 981.941 39.1505C980.944 38.4955 979.577 38.6519 978.833 39.4788C978.259 40.1168 978.034 40.8554 977.962 41.6312C977.879 42.5216 977.989 43.3857 978.578 44.1677C979.194 44.9853 980.263 45.3694 981.362 45.1123C982.138 44.9296 982.225 44.8491 982.073 44.1832Z" fill="white"/>
          <path d="M956.06 58.7612C956.06 55.6177 956.06 52.5098 956.06 49.374C954.135 49.374 952.271 49.374 950.453 49.374C950.375 50.9675 950.338 52.5346 950.211 54.0986C950.098 55.486 949.792 56.8472 949.178 58.1572C948.976 58.5893 948.732 58.8742 948.113 58.7705C948.081 58.7658 948.04 58.7906 948 58.8061C948 59.9582 948 61.1041 948 62.25C948.565 62.25 949.098 62.25 949.674 62.25C949.674 61.4711 949.674 60.7232 949.674 59.9768C951.707 59.9768 953.7 59.9768 955.736 59.9768C955.736 60.7479 955.736 61.4943 955.736 62.2562C956.303 62.2562 956.823 62.2562 957.362 62.2562C957.362 61.0917 957.362 59.9427 957.362 58.7612C956.915 58.7612 956.501 58.7612 956.06 58.7612ZM954.244 58.7488C952.986 58.7488 951.743 58.7488 950.574 58.7488C950.886 57.9652 951.269 57.1941 951.501 56.3935C951.967 54.7846 951.964 53.1338 951.977 51.4878C951.98 51.2338 951.977 50.9767 951.977 50.698C952.737 50.698 953.474 50.698 954.245 50.698C954.244 53.3615 954.244 56.0327 954.244 58.7488Z" fill="white"/>
          <path d="M971.818 44.2654C971.534 44.3474 971.262 44.4465 970.977 44.5038C970.183 44.6649 969.616 44.4884 969.314 43.9882C968.959 43.4028 968.976 42.7741 968.998 42.116C970.017 42.116 970.996 42.116 971.994 42.116C972.059 41.1312 971.939 40.2082 971.315 39.3689C970.766 38.6318 969.817 38.5142 969.063 39.1196C968.78 39.3457 968.541 39.6353 968.374 39.9295C967.906 40.7487 967.728 41.6313 967.838 42.5264C967.908 43.0823 968.061 43.6475 968.298 44.1709C968.642 44.9405 969.436 45.3338 970.354 45.2363C970.799 45.1898 971.243 45.0644 971.661 44.9188C972.128 44.7578 972.14 44.6091 971.818 44.2654ZM969.495 39.8273C969.833 39.4076 970.39 39.42 970.689 39.8598C971.023 40.3476 971.064 40.8865 971.05 41.4517C970.323 41.4517 969.659 41.4517 968.962 41.4517C968.995 40.8602 969.108 40.312 969.495 39.8273Z" fill="white"/>
          <path d="M974.573 49.5721C974.508 49.4931 974.426 49.3739 974.344 49.3708C973.85 49.3507 973.354 49.3584 972.808 49.3584C972.808 50.8279 972.808 52.2774 972.808 53.7345C971.733 53.7345 970.711 53.7345 969.602 53.7345C969.602 52.265 969.602 50.8248 969.602 49.3661C969.003 49.3661 968.456 49.3661 967.893 49.3661C967.893 52.9355 967.893 56.4863 967.893 60.0541C968.473 60.0541 969.029 60.0541 969.624 60.0541C969.624 59.8992 969.624 59.766 969.624 59.636C969.624 58.3878 969.622 57.1475 969.624 55.9009C969.624 55.2149 969.624 55.2149 970.445 55.2149C971.222 55.2149 971.999 55.2149 972.82 55.2149C972.82 56.8579 972.82 58.4513 972.82 60.0572C973.422 60.0572 973.98 60.0572 974.557 60.0572C974.565 59.9395 974.578 59.8388 974.578 59.7428C974.578 56.3949 974.578 53.047 974.578 49.7022C974.578 49.6573 974.599 49.6015 974.573 49.5721Z" fill="white"/>
          <path d="M975.528 41.3743C976.126 40.6868 976.697 39.9853 977.278 39.29C977.349 39.2049 977.411 39.115 977.51 38.985C977.323 38.985 977.213 38.9974 977.109 38.9834C976.685 38.9261 976.426 39.0639 976.196 39.3675C975.686 40.0364 975.121 40.6744 974.576 41.3232C974.514 41.396 974.437 41.4595 974.288 41.6035C974.288 40.6729 974.288 39.8459 974.288 39.002C973.953 39.002 973.661 39.002 973.342 39.002C973.342 40.9934 973.342 42.9523 973.342 44.9096C973.667 44.9096 973.96 44.9096 974.302 44.9096C974.302 44.2081 974.286 43.5206 974.311 42.8361C974.32 42.6008 974.429 42.3654 974.491 42.13C974.675 42.2431 974.754 42.3437 974.824 42.449C975.318 43.1908 975.805 43.9325 976.304 44.6696C976.369 44.7672 976.481 44.8988 976.586 44.9127C976.868 44.9483 977.157 44.9251 977.506 44.9251C976.812 43.869 976.165 42.8718 975.502 41.8792C975.377 41.6933 975.367 41.5586 975.528 41.3743Z" fill="white"/>
          <path d="M998.274 49.3369C997.996 49.3276 997.87 49.4066 997.771 49.6187C997.101 51.096 996.413 52.5656 995.73 54.0382C995.431 54.6824 995.122 55.3266 994.82 55.9708C994.79 55.9677 994.767 55.9615 994.738 55.9584C994.738 53.7657 994.738 51.573 994.738 49.3632C994.137 49.3632 993.579 49.3632 993.008 49.3632C993.008 52.9388 993.008 56.5019 993.008 60.0666C993.579 60.0666 994.118 60.0666 994.707 60.0666C995.786 57.7346 996.865 55.3932 997.954 53.0317C997.954 55.3823 997.954 57.7222 997.954 60.0604C998.632 60.0604 999.261 60.0604 999.908 60.0604C999.908 56.4849 999.908 52.9341 999.908 49.3447C999.346 49.3447 998.81 49.3601 998.274 49.3369Z" fill="white"/>
          <path d="M965.522 58.5289C964.991 58.6931 964.512 58.8804 964.007 58.9842C962.368 59.3202 961.296 58.8665 960.828 57.6772C960.468 56.7636 960.481 55.8206 960.466 54.8249C962.262 54.8249 964.004 54.8249 965.818 54.8249C965.743 53.9964 965.736 53.1881 965.585 52.4061C965.395 51.4259 965.017 50.4859 964.235 49.6962C963.543 48.9978 962.71 48.7949 961.671 49.0767C960.591 49.3694 959.933 50.0477 959.49 50.8514C958.193 53.2098 958.081 55.6394 959.075 58.0891C959.374 58.8293 959.881 59.4735 960.723 59.8854C962.135 60.5807 964.419 60.3392 965.852 59.3373C965.739 59.0585 965.624 58.7767 965.522 58.5289ZM961.274 50.9489C961.527 50.5943 961.863 50.3047 962.426 50.331C962.978 50.3605 963.304 50.6485 963.526 51.0232C964.015 51.8641 964.097 52.7653 964.093 53.7006C962.86 53.7006 961.669 53.7006 960.415 53.7006C960.508 52.7111 960.681 51.7836 961.274 50.9489Z" fill="white"/>
          <path d="M966.325 44.2484C966.325 42.4893 966.325 40.7519 966.325 39.0005C965.261 39.0005 964.241 39.0005 963.161 39.0005C963.161 39.3938 963.175 39.7469 963.16 40.1015C963.107 41.3341 963.062 42.5683 962.548 43.7483C962.421 44.0394 962.327 44.3506 961.836 44.2856C961.836 44.9422 961.836 45.5678 961.836 46.1903C962.146 46.1903 962.423 46.1903 962.748 46.1903C962.748 45.7644 962.748 45.3587 962.748 44.953C963.906 44.953 965.015 44.953 966.175 44.953C966.175 45.382 966.175 45.7877 966.175 46.1841C966.5 46.1841 966.774 46.1841 967.037 46.1841C967.037 45.5275 967.037 44.9019 967.037 44.2763C966.79 44.267 966.579 44.2577 966.325 44.2484ZM965.326 44.2484C964.605 44.2484 963.926 44.2484 963.196 44.2484C964.12 42.8176 963.995 41.2799 964.061 39.7453C964.484 39.7453 964.893 39.7453 965.326 39.7453C965.326 41.2443 965.326 42.7293 965.326 44.2484Z" fill="white"/>
          <path d="M985.732 49.3601C985.732 52.9434 985.732 56.5004 985.737 60.0589C986.27 60.0589 986.776 60.0589 987.318 60.0589C987.318 56.8503 987.318 53.665 987.318 50.4363C988.947 50.4363 990.545 50.4363 992.139 50.4363C992.139 50.0538 992.139 49.7147 992.139 49.3601C989.999 49.3601 987.886 49.3601 985.732 49.3601Z" fill="white"/>
        </g>
        <g clip-path="url(#clip1_512_745)">
          <path d="M1151.53 48.3681L1149.25 50.425L1151.31 52.7002L1153.58 50.6433L1151.53 48.3681Z" fill="white"/>
          <path d="M1146.99 50.2187L1143.96 52.9517L1146.69 55.9891L1149.73 53.2562L1146.99 50.2187Z" fill="white"/>
          <path d="M1155.63 47.6442L1154.12 49.011L1155.48 50.5275L1157 49.1606L1155.63 47.6442Z" fill="white"/>
          <path d="M1147.48 38.9843L1145.2 41.0356L1147.25 43.3145L1149.53 41.2632L1147.48 38.9843Z" fill="white"/>
          <path d="M1153.69 43.1126L1152.18 44.48L1153.55 45.9948L1155.06 44.6275L1153.69 43.1126Z" fill="white"/>
          <path d="M1070.17 43.2405L1068.69 50.9499H1068.58L1066.56 43.2405H1065.26L1063.37 50.9499H1063.26L1061.63 43.2405H1060L1062.36 53.5728H1063.94L1065.86 46.299H1065.96L1067.94 53.5728H1069.52L1071.88 43.2405H1070.17Z" fill="white"/>
          <path d="M1144.84 44.9566L1141.8 47.6921L1144.53 50.7296L1147.57 47.9941L1144.84 44.9566Z" fill="white"/>
          <path d="M1142.67 39.7807L1139.63 42.5149L1142.36 45.5524L1145.4 42.8181L1142.67 39.7807Z" fill="white"/>
          <path d="M1149.57 43.5671L1147.3 45.6189L1149.36 47.8964L1151.63 45.8446L1149.57 43.5671Z" fill="white"/>
          <path d="M1151.74 38.608L1150.23 39.9749L1151.59 41.4913L1153.11 40.1245L1151.74 38.608Z" fill="white"/>
          <path d="M1126.8 46.3574L1125.14 51.7258H1125.06L1123.19 46.3594H1121.59L1124.39 53.6488C1124.04 54.7279 1123.43 55.5134 1122.43 55.5134V56.7053C1124.11 56.7053 1125 55.6573 1125.73 53.6449L1128.36 46.3574H1126.8Z" fill="white"/>
          <path d="M1078.55 49.6724C1078.56 47.2906 1077.43 46.1143 1075.61 46.1143C1073.43 46.1143 1072.3 47.7145 1072.3 49.931C1072.3 52.2351 1073.31 53.7497 1075.76 53.7497C1076.81 53.7497 1077.68 53.4581 1078.34 53.0751V51.9726C1077.54 52.449 1076.81 52.729 1076.02 52.729C1074.52 52.729 1073.81 51.959 1073.81 50.2071H1078.55V49.6724ZM1073.83 49.2291C1073.99 47.7747 1074.68 47.0884 1075.57 47.0884C1076.36 47.0884 1077.1 47.697 1077.17 49.2291H1073.83Z" fill="white"/>
          <path d="M1153.53 52.9719L1151.26 55.0244L1153.31 57.3038L1155.59 55.2512L1153.53 52.9719Z" fill="white"/>
          <path d="M1121.13 49.6724C1121.13 47.2906 1120.01 46.1143 1118.19 46.1143C1116 46.1143 1114.88 47.7145 1114.88 49.931C1114.88 52.2351 1115.89 53.7497 1118.33 53.7497C1119.38 53.7497 1120.25 53.4581 1120.91 53.0751V51.9726C1120.11 52.449 1119.38 52.729 1118.59 52.729C1117.1 52.729 1116.38 51.959 1116.38 50.2071H1121.13V49.6724ZM1116.41 49.2291C1116.57 47.7747 1117.26 47.0884 1118.15 47.0884C1118.93 47.0884 1119.68 47.697 1119.75 49.2291H1116.41Z" fill="white"/>
          <path d="M1149.54 55.5541L1146.57 58.2918L1141.56 52.7134L1142.95 51.4866L1139.44 47.557L1140.84 46.3282L1137.28 42.4025L1142.84 37.3978L1144.6 39.3304L1147.59 36.6706L1149.35 38.4963L1150.52 37.4444C1150.26 37.2928 1150 37.1528 1149.73 37.0264C1148.04 36.1981 1146.13 35.7314 1144.13 35.7314C1137.1 35.7314 1131.36 41.4673 1131.36 48.502C1131.36 55.5347 1137.1 61.2705 1144.13 61.2705C1146.42 61.2705 1148.57 60.6659 1150.43 59.6062C1151.04 59.2601 1151.6 58.8848 1152.11 58.4901L1149.54 55.5541Z" fill="white"/>
          <path d="M1083.36 46.1143C1082.58 46.1143 1081.83 46.4196 1081.39 46.6529V42.4998L1079.88 42.8634V53.0343C1080.75 53.499 1081.95 53.7479 1082.72 53.7479C1084.84 53.7479 1086.15 52.4199 1086.15 49.6939C1086.15 47.3665 1085.17 46.1143 1083.36 46.1143ZM1082.72 52.7271C1082.36 52.7271 1081.85 52.6998 1081.38 52.4957V47.7301C1081.97 47.4093 1082.39 47.2498 1082.97 47.2498C1083.94 47.2498 1084.62 47.8487 1084.62 49.6958C1084.62 52.0563 1083.8 52.7271 1082.72 52.7271Z" fill="white"/>
          <path d="M1111.12 46.1104C1109.45 46.1104 1108.06 46.7948 1107.41 47.1875V53.5689H1108.92V47.8C1109.37 47.5375 1110.12 47.275 1110.7 47.275C1111.45 47.275 1112.01 47.4792 1112.01 48.6302V53.5708H1113.53V48.2978C1113.53 46.7987 1112.87 46.1142 1111.12 46.1104Z" fill="white"/>
          <path d="M1095.97 43.2405L1092.85 51.3854H1092.78L1089.52 43.2405H1087.75V53.5728H1089.06V46.2562H1089.19L1092.17 53.5728H1093.1L1096.07 46.0792H1096.2V53.5728H1097.78V43.2405H1095.97Z" fill="white"/>
          <path d="M1102.7 46.1143C1100.78 46.1143 1099.38 47.382 1099.38 49.931C1099.38 52.4218 1100.7 53.7497 1102.7 53.7497C1104.7 53.7497 1106.02 52.4218 1106.02 49.931C1106.02 47.38 1104.62 46.1143 1102.7 46.1143ZM1102.7 52.727C1101.67 52.727 1100.91 51.9298 1100.91 49.931C1100.91 47.9633 1101.74 47.1331 1102.7 47.1331C1103.69 47.1331 1104.49 47.9633 1104.49 49.931C1104.49 51.9279 1103.73 52.727 1102.7 52.727Z" fill="white"/>
        </g>
        <rect opacity="0.2" x="750.5" y="19.5" width="83" height="59" rx="13.5" stroke="white"/>
        <rect opacity="0.2" x="841.5" y="19.5" width="83" height="59" rx="13.5" stroke="white"/>
        <rect opacity="0.2" x="932.5" y="19.5" width="106" height="59" rx="13.5" stroke="white"/>
        <rect opacity="0.2" x="1047.5" y="19.5" width="122" height="59" rx="13.5" stroke="white"/>
        <path d="M1378.24 102.853C1378.24 103.879 1377.45 104.71 1376.48 104.71C1375.51 104.71 1374.72 103.879 1374.72 102.853C1374.72 101.827 1375.51 100.996 1376.48 100.996C1377.45 100.996 1378.24 101.827 1378.24 102.853ZM1372.69 102.853C1372.69 103.879 1371.9 104.71 1370.93 104.71C1369.96 104.71 1369.17 103.879 1369.17 102.853C1369.17 101.827 1369.96 100.996 1370.93 100.996C1371.9 100.996 1372.69 101.827 1372.69 102.853ZM1367.13 102.853C1367.13 103.879 1366.35 104.71 1365.38 104.71C1364.41 104.71 1363.62 103.879 1363.62 102.853C1363.62 101.827 1364.41 100.996 1365.38 100.996C1366.35 100.996 1367.13 101.827 1367.13 102.853Z" fill="white"/>
        <defs>
          <clipPath id="clip0_512_745">
            <rect width="76" height="76" fill="white" transform="translate(948 11)"/>
          </clipPath>
          <clipPath id="clip1_512_745">
            <rect width="97" height="97" fill="white" transform="translate(1060)"/>
          </clipPath>
        </defs>
      </svg>
    </div>

    <div v-if="cart.items.length>0" class="container">
      <div class="flex items-center justify-between">
        <q-btn color="primary" class="no-border-radius q-py-md q-px-md q-mb-lg"  size="16px"  @click="$router.push('/catalog')" outline  unelevated no-caps text-color="primary" label="Вернуться в каталог"/>
        <q-btn color="primary" class="no-border-radius q-py-md q-px-md q-mb-lg"  size="16px"  @click="createOrder"  unelevated no-caps text-color="white" label="Оформить заказ"/>
      </div>
    </div>
  </q-page>
</template>
<script>
import {mapActions, mapGetters} from "vuex";

export default {
  data() {
    return {
      deliveryTypeOptions:[
        {value:1,label:'Доставка в пункты выдачи'},
        {value:2,label:'Доставка курьером'},
        {value:3,label:'Доставка Почтой России'},
      ],
      loading:false,
      agree:false,
      agree1:false,
      city_loading:false,
      is_loading:false,
      delivery:'courier',
      delivery_type:null,
      address:null,
      companies:[],
      is_valid:false,
      points:[],
      cities:[{
        name:'132'
      }],
      companyLoading:false,
      companies_loaded:false,
      selectedCompany:null,
      selectedPoint:null,
      allCompanies:[],
      avaiableCompanies:[],
      personalInfo:{
        email:null,
        phone:null,
        name:null,
        lastName:null,
        city:null,
        street:null,
        home:null,
        index:null,
        kv:null
      },
      headers : {
        'Authorization' :  `Bearer ${process.env.API_KEY}`
      },
      headers_post : {
        'Authorization' :  `Bearer ${process.env.API_KEY}`,
        'Shop-Id': 78331,
        'Content-Type': 'application/json'
      }

    }
  },
  async mounted() {
    this.companyLoading = !this.companyLoading
    const response = await this.$axios.get('https://api.saferoute.ru/v2/lists/delivery-companies',{
      headers:this.headers
    })
    console.log(response.data)
    this.allCompanies = response.data
    this.companyLoading = !this.companyLoading
  },
  watch:{
    async 'personalInfo.city'(val){
      console.log(val)
      this.avaiableCompanies = []
      val.postalCode ? this.personalInfo.index = val.postalCode : null
      // const response = await this.$axios.post('https://api.saferoute.ru/v2/calculator/company',
      //   {'reception.cityName': this.personalInfo.city.locality},{
      //     headers:this.headers_post,
      //   })
      // console.log(response.data)
      // for (let x of this.allCompanies){
      //   if (response.data['1'].includes(x.id)){
      //     this.avaiableCompanies.push(x)
      //   }
      // }
      // console.log(this.avaiableCompanies)

    },
    async selectedCompany(val){
      console.log(val)
      if(val){
        await this.getPoints()
      }
    },
    // async selectedPoint(val){
    //   console.log(val)
    //   if(val){
    //     const data = {
    //       type:1,
    //       'reception.cityFias':this.personalInfo.city.fias,
    //       'reception.cityName':this.personalInfo.city.locality,
    //       'reception.street':'Панагюриште',
    //       'reception.house':'2',
    //       companyIds:[this.selectedCompany.id],
    //       // products:[
    //       //   {
    //       //     'vendorCode':123,
    //       //     'dimensions.width':10,
    //       //     'dimensions.height':10,
    //       //     'dimensions.length':10,
    //       //     'weight':0.1,
    //       //     'count':1
    //       //   }
    //       // ]
    //       places:[
    //         {
    //           'dimensions.width':10,
    //           'dimensions.height':10,
    //           'dimensions.length':10,
    //           'weight':1,
    //           'itemCount':1,
    //
    //         }
    //       ]
    //     }
    //     const response = await this.$axios.post('https://api.saferoute.ru/v2/calculator',
    //       data,{
    //         headers:this.headers_post,
    //       })
    //     console.log(response.data)
    //   }
    // }
  },

  methods:{

    ... mapActions('auth',['getUser']),
    ... mapActions('data',['fetchOrders','fetchCart']),
    async calcDelivery(){
      this.is_loading = !this.is_loading
      const data = {
        reception:{
          'cityFias':this.personalInfo.city.fias,
          'cityName':this.personalInfo.city.locality,
          'street':this.personalInfo.street,
          'house':this.personalInfo.home,
          'zipCode':this.personalInfo.index,
          'region':this.personalInfo.regionWithType,
        },


        'dimensions.width':10,
        'dimensions.height':10,
        'dimensions.length':10,
        'weight':1,
        'itemCount':1,
        'volume':0.01,
      }
      const response = await this.$axios.post('https://api.saferoute.ru/v2/calculator',
        data,{
          headers:this.headers_post,
        })
      console.log(response.data)
      this.avaiableCompanies = response.data
      this.is_loading = !this.is_loading
      this.companies_loaded = true
    },
    filterCities(val, update){
      if (val === '') {
        update(() => {
          this.cities = []
        })
        return
      }
      if (val.length<2){
        return
      }

      update( async () => {
        this.city_loading = !this.city_loading
        const needle = val.toLowerCase()
        const result = await this.$axios.get(`https://api.saferoute.ru/v2/cities?name=${needle}&lang=ru&toBound=flat`, {
          headers: this.headers
        })
        console.log(result.data)
        this.cities = result.data
        this.city_loading = !this.city_loading
      })
    },
    async getPoints(){
      this.companyLoading = !this.companyLoading
      const response = await this.$axios.get(`https://api.saferoute.ru/v2/lists/points?
      companyId=${this.selectedCompany.id}&
      cityFias=${this.personalInfo.city.fias}`,{
        headers:this.headers
      })
      this.points = response.data
      console.log(this.points)
      this.companyLoading = !this.companyLoading
    },
    async deleteItem(id){
      await this.$api.post('/api/cart/delete_item',{id,session_id:this.$q.cookies.get('session_id')})
      await this.fetchCart()
    },
    async changeAmount(action,id){
      await this.$api.post('/api/cart/change_amount',{id,action,session_id:this.$q.cookies.get('session_id')})
      await this.fetchCart()
    },

    async createOrder(){
      console.log(await this.$refs.personalForm.validate())
      return

      this.loading = !this.loading
      const result = await this.$api.post('/api/order/create',{delivery:this.delivery,address:this.address,session_id:this.$cookies.get('session_id')})
      console.log(result)
      if(result.data.success){
        console.log(result.data.payment_url)
        this.$q.notify({
          message: 'Заказ создан',
          position: this.$q.screen.lt.sm ? 'bottom' : 'bottom-right',
          color:'positive',
          icon: 'announcement'
        })
        window.open(result.data.payment_url, '_blank').focus();
      }else{
        this.$q.notify({
          message: 'Заказ создан, но произошла<br> ошбка формирования платежа',
          position: this.$q.screen.lt.sm ? 'bottom' : 'bottom-right',
          color:'negative',
          html:true,
          icon: 'announcement'
        })
      }
      this.loading = !this.loading
      await this.fetchCart()
      await this.fetchOrders()
      await this.getUser()

    }
  },
  computed:{
    ...mapGetters('data',['cart']),
    total_weight(){
      let temp = 0

      for (let i of this.cart.items){
        console.log(i)
        temp += parseFloat(i.volume.weight) * i.amount
      }
      return temp
    },
    total_vol(){
      let temp = 0

      for (let i of this.cart.items){
        console.log((i.volume.width *i.volume.height * i.volume.length / 1000000) * i.amount  )
        temp += (i.volume.width * i.volume.height * i.volume.length / 1000000) * i.amount
      }
      return parseFloat(temp).toFixed(3)
    }

  }
}
</script>
<style lang="sass" scoped>
.cart-grid
  display: grid
  grid-template-columns: 2fr 1fr 1fr 1fr
  grid-gap: 30px

.cart
  background: #FFFFFF

  &-item
    padding-bottom: 40px
    border-bottom: 1px solid #E5E5E5
    margin-bottom: 20px
    &:last-child
      border-bottom: none
    &-img
      display: grid
      grid-template-columns: 1fr 1fr
      grid-gap: 30px
.item
  &-card
    display: grid
    grid-template-columns: 1fr 2fr
    grid-gap: 30px
@media (max-width: 768px)
  .cart
    padding: 10px
    &-grid
      grid-template-columns: 1fr
  .item
    &-card
      grid-template-columns: 1fr
</style>
